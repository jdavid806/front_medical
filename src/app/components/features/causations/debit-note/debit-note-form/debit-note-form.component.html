<!-- Main Header Section -->
<div
  class="flex items-center justify-between mb-4 bg-white p-3 rounded-lg shadow-md"
>
  <!-- Left Section - Back Button -->
  <div class="flex-1 flex justify-start">
    <p-button
      label="{{ 'ACCOUNTANT' | translate }} - {{ 'MOVEMENTS' | translate }}"
      icon="pi pi-arrow-left"
      styleClass="p-button-text p-button-secondary"
      [raised]="true"
      routerLink="/causations/movements"
    >
    </p-button>
  </div>

  <!-- Center Section - Title -->
  <div class="flex-1">
    <h1 class="text-2xl font-bold mb-1">
      {{ "NEW_CASH_RECEIPT" | translate }}
    </h1>
    <div class="w-20 h-1 bg-blue-500 mx-auto"></div>
  </div>

  <!-- Blue underline decoration -->
  <div class="flex-2 flex justify-end">
    <p-button
      icon="pi pi-check"
      styleClass="mx-2"
      label="Crear Nuevo Cliente"
      [raised]="true"
    >
    </p-button>
  </div>
</div>

<!-- Main Content Container -->
<div class="w-full p-4 flex flex-column align-items-center">
  <div class="w-full" style="max-width: 900px; min-height: 100vh">
    <!-- Form Card -->
    <div class="card shadow-2 p-3">
      <form [formGroup]="form" class="h-full">
        <div class="grid">
          <div class="col-12 md:col-6 pr-0 md:pr-3">
            <div class="mb-3">
              <label class="block mb-1 font-medium"
                >{{ "TYPE" | translate }} *</label
              >
              <p-select
                [options]="typeOptions"
                formControlName="type"
                optionLabel="name"
                placeholder="{{ 'SELECT_TYPE' | translate }}"
                [ngClass]="{
                  'ng-invalid ng-dirty':
                    form.get('type')?.invalid && form.get('type')?.touched
                }"
                class="w-full"
                [filter]="true"
                filterBy="name"
                [showClear]="true"
              >
              </p-select>
            </div>
            <!-- Clients -->
            <div class="mb-3">
              <label class="block mb-1 font-medium"
                >{{ "CLIENTS" | translate }} *</label
              >
              <p-select
                [options]="clientsOptions"
                formControlName="clients"
                optionLabel="fullName"
                placeholder="{{ 'SELECT_CLIENT' | translate }}"
                class="w-full"
                [ngClass]="{
                  'ng-invalid ng-dirty':
                    form.get('clients')?.invalid && form.get('clients')?.touched
                }"
                [filter]="true"
                filterBy="name"
                [showClear]="true"
              >
              </p-select>
            </div>

            <!-- Make a payment -->
            <div class="mb-3">
              <label class="block mb-1 font-medium"
                >{{ "MAKE_PAYMENT" | translate }} *</label
              >
              <p-select
                [options]="makepayment"
                formControlName="make"
                optionLabel="name"
                placeholder="{{ 'SELECT_MAKE_PAYMENT' | translate }}"
                class="w-full"
                [ngClass]="{
                  'ng-invalid ng-dirty':
                    form.get('make')?.invalid && form.get('make')?.touched
                }"
                [filter]="true"
                filterBy="name"
                [showClear]="true"
              >
              </p-select>
            </div>

            <!-- Source of money -->
            <div class="mb-3">
              <label class="block mb-1 font-medium"
                >{{ "MONEY_SOURCE" | translate }} *</label
              >
              <p-select
                [options]="moneySourceOptions"
                formControlName="moneySource"
                optionLabel="name"
                placeholder="{{ 'SELECT_CLIENT' | translate }}"
                class="w-full"
                [ngClass]="{
                  'ng-invalid ng-dirty':
                    form.get('moneySource')?.invalid &&
                    form.get('moneySource')?.touched
                }"
                [filter]="true"
                filterBy="name"
                [showClear]="true"
              >
              </p-select>
            </div>
          </div>

          <!-- Right Column - Secondary Fields -->
          <div class="col-12 md:col-6 pl-0 md:pl-3">
            <!-- Row 1: Invoice number -->
            <div class="field mb-3">
              <label class="block mb-1 font-medium"
                >{{ "INVOICE_NUMBER" | translate }} *</label
              >
              <input
                pInputText
                class="w-full"
                formControlName="invoiceNumber"
              />
            </div>

            <!-- Row 2: Creation Date -->
            <div class="mb-3">
              <label class="block mb-1 font-medium"
                >{{ "CREATION_DATE" | translate }} *</label
              >
              <p-datepicker
                formControlName="creationDate"
                [iconDisplay]="'input'"
                [showIcon]="true"
                [showButtonBar]="true"
                inputId="icondisplay"
                dateFormat="dd/mm/yy"
                inputStyleClass="w-full"
                styleClass="w-full"
                [ngClass]="{
                  'ng-invalid ng-dirty':
                    form.get('creationDate')?.invalid &&
                    form.get('creationDate')?.touched
                }"
              >
              </p-datepicker>
            </div>

            <!-- Row 3: Cost Center -->
            <div class="mb-3">
              <label class="block mb-1 font-medium"
                >{{ "COST_CENTER" | translate }} *</label
              >
              <p-select
                [options]="costCenterOptions"
                formControlName="costCenter"
                optionLabel="name"
                placeholder="{{ 'SELECT_CLIENT' | translate }}"
                class="w-full"
                [ngClass]="{
                  'ng-invalid ng-dirty':
                    form.get('costCenter')?.invalid &&
                    form.get('costCenter')?.touched
                }"
              >
              </p-select>
            </div>

            <!-- Row 4: Amount paid -->
            <div class="mb-3">
              <label class="block mb-1 font-medium"
                >{{ "AMOUNT_PAID" | translate }} *</label
              >
              <p-inputNumber
                mode="currency"
                currency="USD"
                locale="en-US"
                formControlName="amountPaid"
                [min]="0"
                class="w-full"
                [style.position]="'static !important'"
                [ngClass]="{
                  'ng-invalid ng-dirty':
                    form.get('amountPaid')?.invalid &&
                    form.get('amountPaid')?.touched
                }"
              >
              </p-inputNumber>
            </div>
          </div>

          <!-- Remarks Field -->
          <div class="col-12 mt-2">
            <div>
              <label class="block mb-1 font-medium"
                >{{ "OBSERVATIONS" | translate }} *</label
              >
              <textarea
                pTextarea
                rows="4"
                formControlName="observations"
                class="w-full"
                [ngClass]="{
                  'ng-invalid ng-dirty':
                    form.get('observations')?.invalid &&
                    form.get('amountPaid')?.touched
                }"
              >
              </textarea>
            </div>
          </div>
        </div>

        <!-- Button container with space on the sides -->
        <div class="button-container">
          <div class="button-group">
            <!-- Cancel Button -->
            <p-button
              icon="pi pi-times"
              class="action-button"
              variant="text"
              label="Cancelar"
              [raised]="true"
              severity="secondary">
            </p-button>

            <!-- Save Button -->
            <p-button
              icon="pi pi-save"
              class="action-button"
              [raised]="true"
              label="Guardar y Descargar"
              [disabled]="form.invalid">
            </p-button>

            <!-- Download Button -->
            <p-button
              icon="pi pi-download"
              class="action-button"
              label="Descargar"
              [raised]="true">
            </p-button>
          </div>
        </div>  
      </form>
    </div>
  </div>
</div>
